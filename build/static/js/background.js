chrome.runtime.onInstalled.addListener(()=>{chrome.storage.sync.set({summaries:[],openaiKey:""})}),chrome.runtime.onMessage.addListener((e,t,r)=>{if("getOpenAIKey"===e.action)return chrome.storage.sync.get(["openaiKey"],e=>{r({key:e.openaiKey})}),!0;if("openai_summary"===e.action){const t=e.apiKey,o=e.body;let s="https://api.openai.com/v1/chat/completions",a={"Content-Type":"application/json",Authorization:"Bearer ".concat(t)};return t&&t.startsWith("or-")&&(s="https://openrouter.ai/api/v1/chat/completions",a["HTTP-Referer"]="https://web.telegram.org",a["X-Title"]="Telegram Summary Extension"),fetch(s,{method:"POST",headers:a,body:JSON.stringify(o)}).then(e=>e.json()).then(e=>{e.error?r({success:!1,error:e.error.message}):r({success:!0,data:e})}).catch(e=>{r({success:!1,error:e.message})}),!0}});
//# sourceMappingURL=background.js.map